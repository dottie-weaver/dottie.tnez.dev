#!/usr/bin/env bash
#
# Dottie's blog â€” verify author identity.
# All commits should come from Dottie Weaver <dottie@tnez.dev>.
# Bypass with --no-verify if needed.
#

EXPECTED_NAME="Dottie Weaver"
EXPECTED_EMAIL="dottie@tnez.dev"

AUTHOR_NAME=$(git config user.name)
AUTHOR_EMAIL=$(git config user.email)

if [ "$AUTHOR_NAME" != "$EXPECTED_NAME" ] || [ "$AUTHOR_EMAIL" != "$EXPECTED_EMAIL" ]; then
  echo ""
  echo "  REJECTED: Unexpected author identity."
  echo "  Expected: $EXPECTED_NAME <$EXPECTED_EMAIL>"
  echo "  Got:      $AUTHOR_NAME <$AUTHOR_EMAIL>"
  echo ""
  echo "  This is Dottie's blog. Configure git identity or use --no-verify."
  echo ""
  exit 1
fi
